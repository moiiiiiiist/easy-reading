<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‡’æ»šåŠ¨ (Lazy Scrolling) æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .concept {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        
        .method {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        
        .method.lazy {
            border-color: #4CAF50;
            background: #f1f8e9;
        }
        
        .method.traditional {
            border-color: #FF9800;
            background: #fff3e0;
        }
        
        .demo-visual {
            background: #263238;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            font-family: monospace;
            margin: 20px 0;
        }
        
        .viewport {
            border: 2px solid #2196F3;
            background: rgba(33, 150, 243, 0.1);
            padding: 10px;
            margin: 10px 0;
            position: relative;
        }
        
        .sentence {
            padding: 5px;
            margin: 2px 0;
            background: rgba(255,255,255,0.1);
        }
        
        .current {
            background: #4CAF50 !important;
            font-weight: bold;
        }
        
        .threshold {
            position: absolute;
            bottom: 150px;
            left: 0;
            right: 0;
            height: 2px;
            background: #FF5722;
            opacity: 0.7;
        }
        
        .threshold::after {
            content: "150px é˜ˆå€¼çº¿";
            position: absolute;
            right: 10px;
            top: -20px;
            color: #FF5722;
            font-size: 12px;
        }
        
        .code {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            margin: 15px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ æ‡’æ»šåŠ¨ (Lazy Scrolling) æ¼”ç¤º</h1>
        
        <div class="concept">
            <h3>ğŸ’¡ ä»€ä¹ˆæ˜¯æ‡’æ»šåŠ¨ï¼Ÿ</h3>
            <p><strong>æ‡’æ»šåŠ¨</strong>æ˜¯ä¸€ç§æ™ºèƒ½æ»šåŠ¨ç­–ç•¥ï¼Œåªåœ¨å†…å®¹å³å°†ç¦»å¼€è§†å£æ—¶æ‰è§¦å‘æ»šåŠ¨ï¼Œé¿å…é¢‘ç¹çš„é¡µé¢è·³è·ƒã€‚</p>
            <p>ç±»ä¼¼äºç¿»é¡µçš„ä½“éªŒï¼šå½“å‰é¡µé¢çš„å†…å®¹å¿«çœ‹å®Œäº†ï¼Œæ‰ç¿»åˆ°ä¸‹ä¸€é¡µã€‚</p>
        </div>
        
        <div class="comparison">
            <div class="method traditional">
                <h4>ğŸ”„ ä¼ ç»Ÿæ»šåŠ¨</h4>
                <ul>
                    <li>æ¯æ¬¡åˆ‡æ¢å¥å­éƒ½æ»šåŠ¨</li>
                    <li>é¢‘ç¹çš„é¡µé¢è·³è·ƒ</li>
                    <li>ç”¨æˆ·é˜…è¯»è¢«æ‰“æ–­</li>
                    <li>è§†è§‰å¹²æ‰°è¾ƒå¤§</li>
                </ul>
            </div>
            
            <div class="method lazy">
                <h4>ğŸ¯ æ‡’æ»šåŠ¨</h4>
                <ul>
                    <li>åªåœ¨å¿…è¦æ—¶æ»šåŠ¨</li>
                    <li>ç±»ä¼¼ç¿»é¡µä½“éªŒ</li>
                    <li>å‡å°‘è§†è§‰å¹²æ‰°</li>
                    <li>æ›´æµç•…çš„é˜…è¯»ä½“éªŒ</li>
                </ul>
            </div>
        </div>
        
        <h3>ğŸ“± å¯è§†åŒ–æ¼”ç¤º</h3>
        <div class="demo-visual">
            <div class="viewport">
                <div class="threshold"></div>
                <div class="sentence">ç¬¬1å¥ï¼šåœ¨è§†å£é¡¶éƒ¨çš„å¥å­</div>
                <div class="sentence">ç¬¬2å¥ï¼šæ­£å¸¸å¯è§çš„å¥å­</div>
                <div class="sentence">ç¬¬3å¥ï¼šæ­£å¸¸å¯è§çš„å¥å­</div>
                <div class="sentence current">ç¬¬4å¥ï¼šå½“å‰æ­£åœ¨é˜…è¯»çš„å¥å­</div>
                <div class="sentence">ç¬¬5å¥ï¼šæ­£å¸¸å¯è§çš„å¥å­</div>
                <div class="sentence">ç¬¬6å¥ï¼šæ¥è¿‘åº•éƒ¨çš„å¥å­</div>
                <div class="sentence" style="background: rgba(255,87,34,0.3);">ç¬¬7å¥ï¼šè§¦å‘æ‡’æ»šåŠ¨ï¼è·ç¦»åº•éƒ¨ &lt; 150px</div>
            </div>
            <p style="margin-top: 15px; font-size: 14px;">
                ğŸ’¡ å½“å¥å­æ¥è¿‘çº¢è‰²é˜ˆå€¼çº¿æ—¶ï¼Œè§¦å‘æ‡’æ»šåŠ¨ï¼Œå°†ä¸‹ä¸€å¥æ»šåŠ¨åˆ°è§†å£é¡¶éƒ¨
            </p>
        </div>
        
        <h3>ğŸ”§ å®ç°åŸç†</h3>
        
        <h4>1. é˜ˆå€¼æ£€æµ‹</h4>
        <div class="code">needsLazyScroll(element) {
    const rect = element.getBoundingClientRect();
    const viewHeight = window.innerHeight;
    
    // å¥å­ä¸åœ¨è§†å£ä¸­ï¼Ÿ
    if (rect.bottom <= 0 || rect.top >= viewHeight) {
        return true;
    }
    
    // å¥å­æ¥è¿‘åº•éƒ¨ï¼Ÿï¼ˆè·ç¦»åº•éƒ¨ < 150pxï¼‰
    if (rect.bottom > (viewHeight - 150)) {
        return true;
    }
    
    return false; // åœ¨å®‰å…¨åŒºåŸŸï¼Œä¸éœ€è¦æ»šåŠ¨
}</div>
        
        <h4>2. æ»šåŠ¨è§¦å‘</h4>
        <div class="code">updateCurrentSentence() {
    const currentElement = getCurrentSentenceElement();
    
    if (Utils.needsLazyScroll(currentElement)) {
        // åªåœ¨å¿…è¦æ—¶æ»šåŠ¨
        Utils.smoothScrollToSentence(currentElement);
    }
    // å¦åˆ™ä¸æ»šåŠ¨ï¼Œä¿æŒå½“å‰è§†å›¾
}</div>
        
        <h3>ğŸ¨ å‰ç«¯æœ¯è¯­</h3>
        <div class="concept">
            <h4>ç›¸å…³çš„å‰ç«¯æ¦‚å¿µï¼š</h4>
            <ul>
                <li><strong>Lazy Scrolling</strong> - æ‡’æ»šåŠ¨/å»¶è¿Ÿæ»šåŠ¨</li>
                <li><strong>Viewport-based Scrolling</strong> - åŸºäºè§†å£çš„æ»šåŠ¨</li>
                <li><strong>Pagination Scrolling</strong> - åˆ†é¡µå¼æ»šåŠ¨</li>
                <li><strong>Smart Scrolling</strong> - æ™ºèƒ½æ»šåŠ¨</li>
                <li><strong>Threshold-based Scrolling</strong> - åŸºäºé˜ˆå€¼çš„æ»šåŠ¨</li>
                <li><strong>Debounced Scrolling</strong> - é˜²æŠ–æ»šåŠ¨</li>
            </ul>
        </div>
        
        <h3>ğŸ¯ ä½¿ç”¨åœºæ™¯</h3>
        <div class="comparison">
            <div class="method">
                <h4>é€‚åˆæ‡’æ»šåŠ¨</h4>
                <ul>
                    <li>æ–‡ç« é˜…è¯»å™¨</li>
                    <li>ç”µå­ä¹¦åº”ç”¨</li>
                    <li>æ–°é—»é˜…è¯»</li>
                    <li>é•¿æ–‡æ¡£æµè§ˆ</li>
                </ul>
            </div>
            
            <div class="method">
                <h4>ä¸é€‚åˆæ‡’æ»šåŠ¨</h4>
                <ul>
                    <li>ç²¾ç¡®å®šä½éœ€æ±‚</li>
                    <li>çŸ­å†…å®¹åˆ—è¡¨</li>
                    <li>ç¼–è¾‘å™¨ä¸­çš„è·³è½¬</li>
                    <li>æœç´¢ç»“æœå®šä½</li>
                </ul>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px; color: #666;">
            <p>ğŸ”— <a href="test-scroll.html" style="color: #2196F3;">æŸ¥çœ‹å®é™…æµ‹è¯•é¡µé¢</a></p>
        </div>
    </div>
</body>
</html> 